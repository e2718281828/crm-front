<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="../css/list-of-apps.css">
  
  <link rel="stylesheet" href="../css/common.css">
</head>

<body>
  <header>
    <div class="left-block">
      <div class="brand">
        <a href="../html/list-of-apps.html">Dynamics 365</a>
      </div>

      <div class="search-bar">
        <img src="../img/search.svg" />
        <input type="text" class="search-input" placeholder="Для поиска по номеру заявки начинайте с символа #">
      </div>
    </div>

    <div class="user-actions">
      <a href="./notifications.html" class="notification">
        <img src="../img/bell.svg" id="svg-notification">
      </a>

      <a href="./logIn.html" class="logout">
        <img src="../img/exit.svg" id="svg-logout">
      </a>

      <a href="./personal-page.html" class="user">
        <span class="username">Имя Пользователя</span>
        <img src="../img/user.svg" class="svg-user">
      </a>
    </div>
  </header>

  <div id="container">

    <main>
      <div class="sidebar">
        <div class="title">
          Заявки
        </div>

        <div>
          <!-- <ul class="">
            <a href="#">
              <li><img src="../img/onАssessment1.svg" alt=""><span>123</span></li>
            </a>
            <a href="#">
              <li><img src="../img/clock2.svg" alt=""><span>1234</span></li>
            </a>
          </ul> -->
          <div class="status-nav">
            <a class="status-links" href="../html/list-of-apps.html">
              <div class="status status-is-rated-active">
                <div class="status-img status-tick"></div>
              </div>
              <span class="status-text">На оценке</span>
            </a>
          </div>

          <div class="status-nav">
            <a class="status-links" href="../html/in-work.html">
              <div class="status status-in-progress">
                <div class="status-img status-clock"></div>
              </div>
              <span class="status-text">В работе</span>
            </a>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="header">
          <!-- <div class="new">Новая<img src="../img/add.svg"></div> -->
          <div class="title">Список заявок</div>
          <ul class="status-links">
            <li><a href="#" class="active">Новые</a></li>
            <li><a href="#" class="">Оцененные</a></li>
            <li><a href="#" class="">Отклоненные</a></li>
          </ul>
        </div>

        <div class="filter">
          <div class="filter-buttons">
            <a id="confirm" >
              <img class="confirm-img" src="../img/confirm.svg" alt="">
              Подтвердить
            </a>
            <a id="discard" href="../html/list-of-apps.html">
              <img class="discard-img" src="../img/delete.svg" alt="">
              Сбросить
            </a>
          </div>

          <button class="open-filter">
            <img src="../img/filter.svg" alt="">
            Фильтр по типу работ
          </button>

          <div class="list">
            <ul>
              <label>
                <li>
                  <div>Первый тип работ</div>
                  <input class="checkbox" type="checkbox" value="1" id=""  >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
              <label>
                <li>
                  <div>Второй тип работ</div>
                  <input class="checkbox" type="checkbox" value="2" id="" >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
              <label>
                <li>
                  <div>Третий тип работ</div>
                  <input class="checkbox" type="checkbox" value="3" id="" >
                  <div class="fake-checkbox"></div>
                </li>
              </label> 
              <label>
                <li>
                  <div>Четвертый тип работ</div>
                  <input class="checkbox" type="checkbox" value="4" id=""  >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
              <label>
                <li>
                  <div>Пятый тип работ</div>
                  <input class="checkbox" type="checkbox" value="5" id="" >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
              <label>
                <li>
                  <div>Шестой тип работ</div>
                  <input class="checkbox" type="checkbox" value="6" id="" >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
              <label>
                <li>
                  <div>Седьмой тип работ</div>
                  <input class="checkbox" type="checkbox" value="7" id=""  >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
              <label>
                <li>
                  <div>Восьмой тип работ</div>
                  <input class="checkbox" type="checkbox" value="8" id="" >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
              <label>
                <li>
                  <div>Девятый тип работ</div>
                  <input class="checkbox" type="checkbox" value="9" id="" >
                  <div class="fake-checkbox"></div>
                </li>
              </label>
            </ul>
            
          </div>
          
        </div>

        <article class="app">
          <div class="title">Игорь, +7 999-888-77-66</div>
          <div class="info">
            <span class="id">#4</span>
            <span class="datetime">31 октября, 14:14</span>
          </div>
          <div class="text">
            <div>
             <span>Срок выполнения:</span> 01.01.2020
            </div>
            <div>
              <span>Рекомендуемая цена:</span> 2000р
            </div>
            <div>
              <span>Минимальная цена:</span> 1500р
            </div>
            
          </div>
          <div class="actions">
        
            <span class="btn btn-gray">Отдать в работу</span> 
          
            <button class="submit-delete">Удалить заявку</button>    

            <div class="reject-conf-container"> 
              <div class="reject-conf">
                <div>
                  <span class="take-sure">Вы уверены?</span> 
                  <button class="take-close"><img src="../img/delete.svg" alt=""></button>
                </div>
                
                <div>
                  <button class="take-yes">Да</button>
                  <button class="take-no">Нет</button>
                </div>
              </div>
            </div>  
          </div>
        </article>
        <article class="app">
          <div class="title">Игорь, +7 999-888-77-66</div>
          <div class="info">
            <span class="id">#4</span>
            <span class="datetime">31 октября, 14:14</span>
          </div>
          <div class="text">
            <div>
             <span>Срок выполнения:</span> 01.01.2020
            </div>
            <div>
              <span>Рекомендуемая цена:</span> 2000р
            </div>
            <div>
              <span>Минимальная цена:</span> 1500р
            </div>
            
          </div>
          <div class="actions">

            

            <button class="submit-give">Отдать в работу</button>

            <button class="submit-delete">Удалить заявку</button>    

            <div class="reject-conf-container"> 
              <div class="reject-conf">
                <div>
                  <span class="take-sure">Вы уверены?</span> 
                  <button class="take-close"><img src="../img/delete.svg" alt=""></button>
                </div>
                
                <div>
                  <button class="take-yes">Да</button>
                  <button class="take-no">Нет</button>
                </div>
              </div>
            </div>  
          </div>
        </article>
        

       

        <div id="pagination">
          <ul>
            <li class="item">
              <img src="../img/arrowLgray.svg" alt="">
            </li>
            <li class="item">
              <a class="item active" href="#">1</a>
            </li>
            <li class="item">
              <a class="item" href="#">2</a>
            </li>
            <li class="item">
              <a class="item" href="#">3</a>
            </li>
            <li class="item">
              <a class="item" href="#">...</a>
            </li>
            <li class="item">
              <a class="item" href="#">24</a></span>
            <li class="item">
              <a class="item arrow" href="#">
                <img src="../img/arrowRgreen.svg" alt="">
              </a>
            </li>
          </ul>
        </div>
      </div>

    </main>


  </div>

  <footer>

  </footer>

  <script>

    function showHide() {
      let list = this.nextElementSibling;
      if (list.style.maxHeight) {
        list.style.maxHeight = null;
      } else {
        list.style.maxHeight = 280 + 'px';
      }
    }

    function hideReject() {
      let hideReject = document.getElementsByClassName('reject-conf-container');
      for (let i = 0; i < hideReject.length; i++) {
        hideReject[i].style.maxHeight = null;
      }
    }
    

    let coll = document.getElementsByClassName('open-filter');
    for (let i = 0; i < coll.length; i++) {
      coll[i].addEventListener('click', showHide);
    };

    let sub = document.getElementsByClassName('submit-delete');
    for (let i = 0; i < sub.length; i++) {
      sub[i].addEventListener('click', showHide);
    };

    let clickClose = document.getElementsByClassName('take-close');
    for (let i = 0; i < clickClose.length; i++) {
      clickClose[i].addEventListener('click', hideReject)
    };

    let clickYes = document.getElementsByClassName('take-yes');
    for (let i = 0; i < clickYes.length; i++) {
      clickYes[i].addEventListener('click', hideReject)
    };
    
    let clickNo = document.getElementsByClassName('take-no');
    for (let i = 0; i < clickNo.length; i++) {
      clickNo[i].addEventListener('click', hideReject)
    };

    let confirm = document.getElementById('confirm')
    confirm.addEventListener('click', function() {
      let checkbox = document.getElementsByClassName('checkbox');
      let work_types = []; 
      for (let i = 0; i < checkbox.length; i++) {
        if (checkbox[i].checked) {
          work_types.push(checkbox[i].value);
        };
      };
      const params = new URLSearchParams({work_types});
      let url = './list-of-apps.html/?' + params.toString()
      location.href = url;
    });
   

    


  </script>

</body>